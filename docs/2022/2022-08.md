# 2022년 8월 TIL

## 2022.08.20

### 해시테이블

해시테이블이란? (내일 수정해야겠다 지금 너무 졸리다)

### vuepress로 블로그 만들기

티스토리 블로그에 계속 TIL을 쓰는게 번거롭고 비효율적이라고 생각하던 차, [진유림님의 TIL](http://milooy.github.io/TIL/)을 보고 TIL만 따로 기록하는 공간을 만들어야겠다는 생각이 들었다.

::: tip 티스토리에 TIL을 함께 작성했을 때의 문제점

- 티스토리에 TIL을 같이 쓰니까 TIL도 어느정도 글의 완결성이 있어야 한다는 압박감이 든다. 그 떄문에 잘 안쓰게 됨. 쓰는데에 생각보다 에너지가 많이 들어가는데, 이렇게 작성하기 힘들어서야 매일 쓸 수 있을리 없다. 😞
- 티스토리가 지저분해보인다. 제목이 있는 글과 제목 없이 날짜만 적혀있는 TIL이 왕창 엉켜서 난리 난리가..
- 티스토리는 '일지'를 작성하기 좋은 포맷은 아니다. 그렇다고 내가 마음에 드는 형태로 수정하자니 품이 너무 많이 들 것 같음.
  :::

그런 이유로 TIL용 vuepress 페이지를 만들고, github page를 이용해 배포했다.

- vuepress란? vue를 베이스로 하는 정적 페이지 생성기. 나는 `React에 Gatsby가 있다면 vue에는 vuepress가 있다!` 정도로 이해했다.
- 왜 Gatsby가 아니라 vuepress를 사용했는가? 둘 다 프로젝트를 생성해봤는데, 간편한 레이아웃으로 내가 원하는대로 TIL 로그를 기록하기에 더 적합해보였음. vue 공식 문서도 vuepress로 되어있다고 한다.
- [vuepress 공식문서](https://vuepress.vuejs.org/)
- vuepress 프로젝트 생성하고 기본 설정 및 메인페이지 작성 완료. 나의 첫 .vue 파일이다..  
  ![220820](../../public//220820.png)

### github page deploy를 위한 커맨드 생성 (with git subtree)

공식 문서에서 지시하는 대로 github page 배포까지 하는건 어렵지 않았다. build하면 생성되는 dist 경로에 들어가 해당 내용을 내가 원하는 branch에 push하고, 해당 branch를 배포하도록 github setting에서 설정해주면 된다.

문제는 그 다음이다.  
매일 TIL을 쓸 때마다 build하고, vuepress 프로젝트를 커밋하고, build한 경로로 이동해서 빌드된 정적파일을 배포된 브랜치에 커밋하고. 이 번거로운 작업을 매일매일 할 수는 없었다.
그래서 위에도 링크했던 [진유림님의 TIL github](https://github.com/milooy/TIL)와 [임동진님의 vuepress 가이드](https://limdongjin.github.io/vuejs/vuepress/), 그리고 여러 현자들의 도움 (예를들면 [이런](https://www.three-snakes.com/git/git-subtree))으로 git subtree 기능을 활용해 배포 단계를 아주 약간 더 단순하게 만들었다.  
이제 yarn deploy를 입력하면 다음과 같은 명령어가 실행된다.

```
git push origin main && git subtree push --prefix=docs/.vuepress/dist origin gh-pages
```

이걸 하기 위해 SSH Key도 만들어서 github 인증을 다시 해줬고, subtree prefix도 만들어줬다.  
이제는 TIL을 다 작성한 다음 다음과 같은 명령어만 입력하면 된다.

```
yarn build
git add .
git commit -m "커밋메시지"
yarn deploy
```

### github action을 이용한 자동배포는 실패

사실 github action을 이용해 main 레포에 push가 들어가면 빌드 && 배포 작업도 같이 진행되도록 만들고 싶었는데, 왜인지 모르겠지만 실패했다. 환경변수에 accessToken도 제대로 넣어줬는데..  
다음에 마저 도전해봐야겠다.

::: tip 참고했던 내용들.

- [진유림님 블로그](https://milooy.wordpress.com/2020/07/28/github-actions%eb%a1%9c-vuepress-%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0/)
- [Vuepress로 TIL 블로그 만들기](https://velog.io/@mulgyeol/GitHub-Actions%EB%A1%9C-Vuepress-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0)
- [Vuepress 공식 문서 deploy 항목](https://vuepress.vuejs.org/guide/deploy.html#github-pages)  
  :::
